(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1157:function(e,t,a){"use strict";a.r(t);a(665);var s,l,r=a(664),n=a.n(r),i=(a(862),a(861)),o=a.n(i),c=a(4),m=a.n(c),u=a(6),d=a.n(u),g=a(3),p=a.n(g),v=a(5),h=a.n(v),f=(a(442),a(441)),b=a.n(f),E=a(1),y=a.n(E),N=(a(421),a(452)),O=a(576),j=a(14),S=a(21),k=a(18),w=a(859),R=a.n(w),M=(b.a.Header,b.a.Footer,b.a.Sider),A=b.a.Content,C=(s=Object(S.inject)("Store"),Object(k.withRouter)(l=s(l=Object(S.observer)(l=function(e){function t(){m()(this,t);var e=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={dataMessage:[],limit:10,page:1,total:1,all:"all",noRead:"noRead",type:"all",noReadNum:0,loading:!1,hasMore:!0,readNoYes:!1,handleAll:!0,handleNoread:!1},e.handleList=function(e,t){console.log(t);var a={id:t};Object(j.a)("/apiv1/user/readMessage",a,function(e){e.result?console.log("d.resultd.resultd.resultd.result",e.result):message.error(Object(j.c)(e))})},e.handleAll=function(){var t=e;e.setState({page:1});var a={page:1,limit:e.state.limit,type:e.state.all};Object(j.a)("/apiv1/user/message",a,function(e){e.result?t.setState({dataMessage:e.result.messages,limit:e.result.limit,total:e.result.total,handleAll:!0,handleNoread:!1,type:"all"}):message.error(Object(j.c)(e))})},e.handleNoreadNum=function(){var t=e;t.setState({page:1});var a={page:1,limit:e.state.limit,type:e.state.noRead};Object(j.a)("/apiv1/user/message",a,function(e){e.result?t.setState({dataMessage:e.result.messages,limit:e.result.limit,total:e.result.total,handleAll:!1,handleNoread:!0,type:"noRead"}):message.error(Object(j.c)(e))})},e.setAllRead=function(t){var a=e;if("all"==e.state.type){var s={page:e.state.page,limit:e.state.limit,type:e.state.type};Object(j.a)("/apiv1/user/readAllMessage",s,function(e){e.result?(Object(j.a)("/apiv1/user/message",s,function(t){e.result?a.setState({dataMessage:t.result.messages,total:t.result.total}):message.error(Object(j.c)(t))}),a.noReadNumber()):message.error(Object(j.c)(e))})}else{var l={page:e.state.page,limit:e.state.limit,type:e.state.type};Object(j.a)("/apiv1/user/readAllMessage",l,function(e){var t=a.state.total-a.state.total%a.state.limit,s=Math.ceil(t/a.state.limit);if(e.result)if(a.state.page>=s){var r={page:a.state.page-1,limit:a.state.limit,type:a.state.type};Object(j.a)("/apiv1/user/message",r,function(e){a.setState({page:a.state.page-1,total:e.result.total,noReadNum:e.result.total,dataMessage:e.result.messages})})}else if(1==s){var n={page:1,limit:a.state.limit,type:a.state.type};Object(j.a)("/apiv1/user/message",n,function(e){a.setState({page:a.state.page,total:e.result.total,noReadNum:e.result.total,dataMessage:e.result.messages})})}else Object(j.a)("/apiv1/user/message",l,function(e){a.setState({page:a.state.page,total:e.result.total,noReadNum:e.result.total,dataMessage:e.result.messages})});else message.error(Object(j.c)(e))})}},e.noReadNumber=function(){var t=e;Object(j.a)("/apiv1/user/message",{page:1,limit:10,type:"noRead"},function(e){e.result?t.setState({noReadNum:e.result.total}):message.error(Object(j.c)(e))})},e.ShowSizeChange=function(t,a){var s=e;if("noRead"===e.state.type){var l={page:t,limit:e.state.limit,type:e.state.type};Object(j.a)("/apiv1/user/message",l,function(e){e.result?s.setState({dataMessage:e.result.messages,limit:e.result.limit,total:e.result.total,page:t}):message.error(Object(j.c)(e))})}else{var r={page:t,limit:e.state.limit,type:e.state.type};Object(j.a)("/apiv1/user/message",r,function(e){e.result?s.setState({dataMessage:e.result.messages,limit:e.result.limit,total:e.result.total,page:t}):message.error(Object(j.c)(e))})}},e.componentDidMount=function(){var t=e,a={page:e.state.page,limit:e.state.limit,type:e.state.all};Object(j.a)("/apiv1/user/message",a,function(e){e.result?t.setState({dataMessage:e.result.messages,limit:e.result.limit,total:e.result.total}):message.error(Object(j.c)(e))}),e.noReadNumber()},e.store=new N.a,e}return h()(t,e),d()(t,[{key:"render",value:function(){var e=this,t={current:this.state.page,total:this.state.total,pageSize:this.state.limit,onChange:this.ShowSizeChange};return y.a.createElement(S.Provider,{store:this.store},y.a.createElement("div",{className:"users_wrap plate-container clearFix"},y.a.createElement(b.a,null,y.a.createElement(M,{theme:"light",className:"subpage-menu line-menu",width:"260"},y.a.createElement(O.a,{showKey:"message"})),y.a.createElement(b.a,null,y.a.createElement(A,null,y.a.createElement("div",{className:"messageList"},y.a.createElement("div",{className:"messageBox-header"},y.a.createElement("span",null,"消息中心")),y.a.createElement("div",{className:"messageBox-choice"},y.a.createElement("div",{className:"choice-wrapper"},y.a.createElement("div",{className:"choice-left"},y.a.createElement("span",null,"类型 :"),y.a.createElement("span",{className:this.state.handleAll?"choice-left-color":"",onClick:this.handleAll},"全部"),y.a.createElement("span",{className:this.state.handleNoread?"choice-left-color":"",onClick:this.handleNoreadNum},"未读 (",this.state.noReadNum,")")),y.a.createElement("span",{className:"choice-right",onClick:this.setAllRead},"全部标记为已读"))),y.a.createElement("div",{className:"messageBox-list"},void 0!==this.state.dataMessage&&0!=this.state.dataMessage.length?y.a.createElement(n.a,{size:"small",bordered:!0,pagination:t,dataSource:this.state.dataMessage,renderItem:function(t,a){return y.a.createElement(n.a.Item,{key:t.id,onClick:e.handleList.bind(e,a,t.id),className:t.isRead?"listRead":"listNoRead"},y.a.createElement(n.a.Item.Meta,{avatar:y.a.createElement(o.a,{status:t.isRead?"default":"error"}),title:t.content}),y.a.createElement("div",{className:"messageBox-list-time"},new Date(1e3*t.createTime).toLocaleDateString().replace(/\//g,"-")+" "+new Date(1e3*t.createTime).toTimeString().substr(0,8)))}}):y.a.createElement("div",{className:"noMessageData"},y.a.createElement("div",{className:"messageImg"},y.a.createElement("img",{src:R.a}))))))))))}}]),t}(E.Component))||l)||l)||l);t.default=C},452:function(e,t,a){"use strict";var s,l,r,n=a(4),i=a.n(n),o=a(35);function c(e,t,a,s){a&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0})}function m(e,t,a,s,l){var r={};return Object.keys(s).forEach(function(e){r[e]=s[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=a.slice().reverse().reduce(function(a,s){return s(e,t,a)||a},r),l&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(l):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var u=(l=m((s=function e(){i()(this,e),c(this,"loading",l,this),c(this,"updateLoading",r,this)}).prototype,"loading",[o.observable],{enumerable:!0,initializer:function(){return!1}}),r=m(s.prototype,"updateLoading",[o.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),s);t.a=u},576:function(e,t,a){"use strict";a(160);var s=a(40),l=a.n(s),r=a(4),n=a.n(r),i=a(6),o=a.n(i),c=a(3),m=a.n(c),u=a(5),d=a.n(u),g=a(1),p=a.n(g),v=(a(21),a(18)),h=(a(406),function(e){function t(){return n()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),o()(t,[{key:"render",value:function(){return p.a.createElement(l.a,{mode:"inline",defaultSelectedKeys:[this.props.showKey]},p.a.createElement(l.a.Item,{className:"select-hover",key:"setAccount"},p.a.createElement(v.Link,{to:"/users/UserCenter/setAccount"},p.a.createElement("span",{className:"nav-text"},"账号设置"))),p.a.createElement(l.a.Item,{key:"message"},p.a.createElement(v.Link,{to:"/users/UserCenter/message"},p.a.createElement("span",{className:"nav-text"},"消息中心"))),p.a.createElement(l.a.Item,{key:"aktionen"},p.a.createElement(v.Link,{to:"/users/UserCenter/aktionen"},p.a.createElement("span",{className:"nav-text"},"注册奖励"))),p.a.createElement(l.a.Item,{key:"recomAward"},p.a.createElement(v.Link,{to:"/users/UserCenter/recomAward"},p.a.createElement("span",{className:"nav-text"},"邀请奖励"))),p.a.createElement(l.a.Item,{key:"secretKey",disabled:!0},p.a.createElement(v.Link,{to:"/users/UserCenter/secretKey"},p.a.createElement("span",{className:"nav-text"},"API密钥"))))}}]),t}(g.Component));t.a=h},859:function(e,t,a){e.exports=a.p+"images/df9b08efd159f54aee9a45bcff21a9ac.png"}}]);